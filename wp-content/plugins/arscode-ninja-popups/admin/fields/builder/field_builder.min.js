jQuery(function(d){var k={selector:".builder-popup > .bld-el-text > .bld-el",fontsize_formats:"6px 7px 8px 9px 10px 11px 12px 13px 14px 15px 16px 17px 18px 19px 20px 21px 22px 23px 24px 25px 26px 27px 28px 29px 30px 31px 32px 36px 38px 40px 42px 44px 46px 48px 50px 52px 54px 56px 58px 60px 62px 64px 66px 68px 70px 72px 74px 76px 78px 80px 82px 84px 86px 88px 90px 92px 94px 96px 98px 100px 102px 104px 106px 108px 110px 112px 114px 116px 118px 120px 130px 140px 150px 160px 170px 180px 190px 200px 210px 220px 230px 240px 250px 260px",inline:true,theme:"modern",schema:"html5",resize:false,width:500,menubar:false,relative_urls:false,remove_script_host:false,convert_urls:false,plugins:["colorpicker,hr,lists,paste,textcolor,wordpress,wplink"],toolbar:["bold italic strikethrough underline forecolor fontsizeselect","bullist numlist outdent indent alignleft aligncenter alignright alignjustify link unlink pastetext removeformat"],setup:function(m){m.onChange.add(function(n){jQuery("#"+n.id).parents(".bld-el-cont").find(".bld-el-content").val(n.getContent())})}};var e={change:function(m,n){d(this).trigger("keyup")}};var b={accept:".bld-el-cont-tpl",scope:"bld-el",toleranceType:"touch",drop:function(o,p){var s=Math.floor(Math.random()*100000000);var r=d(this).offset();var n=d("#builder-container").offset();var m=parseInt(d(this).css("border-width"));if(isNaN(m)){m=0}var q=d(p.helper).clone();q.append(d("#builder-tpl-editboxes").children(".bld-el-editbox-"+q.find(".bld-el-type").val()).clone());q.children("input.editbox-args").each(function(t){if(d(this).attr("name")){if(q.children(".bld-el-editbox").find(".bld-editbox-"+d(this).attr("name")).is(":checkbox")){if(d(this).val()==1){q.children(".bld-el-editbox").find(".bld-editbox-"+d(this).attr("name")+"[value="+d(this).val()+"]").attr("checked",true)}}else{if(q.children(".bld-el-editbox").find(".bld-editbox-"+d(this).attr("name")).is(":radio")){q.children(".bld-el-editbox").find(".bld-editbox-"+d(this).attr("name")+'[value="'+d(this).val()+'"]').attr("checked",true)}else{q.children(".bld-el-editbox").find(".bld-editbox-"+d(this).attr("name")).val(d(this).val())}}}});q.children("input.editbox-args").remove();q.find(".bld-el-rand").val(s).attr("disabled",false);q.find(".bld-el-editbox").attr("data-id","element-"+s).attr("id","editbox-element-"+s);q.attr("id","element-"+s);q.find("input, select, textarea").each(function(t){if(d(this).attr("name")){d(this).attr("name",d(this).attr("name").replace("RAND",s));d(this).attr("disabled",false)}});q.find(".bld-mc-select-name").attr("disabled",false);q.find("input, img, div, select, textarea, table, span, a").each(function(t){if(d(this).attr("id")){d(this).attr("id",d(this).attr("id").replace("RAND",s))}});q.find("a").each(function(t){if(d(this).attr("href").indexOf("RAND")){d(this).attr("href",d(this).attr("href").replace("RAND",s))}});q.css("top","-="+(r.top-n.top+m)+"px");q.css("left","-="+(r.left-n.left+m)+"px");q.css("z-index",100);q.find(".bld-editbox-z-index").val(100);q.removeClass("bld-el-cont-tpl snp-builder hover ui-draggable ui-draggable-dragging");q.find(".bld-run-colorpicker").wpColorPicker(e);d(this).append(q);if(q.hasClass("bld-el-text")){tinymce.init(k)}i(q)}};d(".bld-width").on({keyup:function(){if(parseInt(d(this).val())){d(this).parents(".builder-step").find(".bld-step-editbox").find(".bld-editbox-width").val(parseInt(d(this).val()));d(this).parents(".builder-step").find(".builder-popup").width(parseInt(d(this).val()))}}});d(".bld-height").on({keyup:function(){if(parseInt(d(this).val())){d(this).parents(".builder-step").find(".bld-step-editbox").find(".bld-editbox-height").val(parseInt(d(this).val()));d(this).parents(".builder-step").find(".builder-popup").height(parseInt(d(this).val()))}}});d("#builder-tpl").on("mouseenter",".bld-el-cont",function(){if(!d(this).hasClass("ui-draggable")){d(this).draggable({helper:"clone",distance:0,cursor:"pointer",scope:"bld-el",connectWith:".builder-popup",appendTo:"#builder-container",containment:"#snp-cf-bld",start:function(m,n){n.helper.addClass("snp-builder");d(this).draggable("option","cursorAt",{left:Math.floor(n.helper.width()/2),top:Math.floor(n.helper.height()/2)});d(".builder-tpl-lib").hide()}})}});d("#builder-container").find(".builder-popup").droppable(b);d(".builder-popup").on("mouseenter",".bld-el-cont",function(){if(!d(this).hasClass("ui-draggable")){d(this).draggable({handle:".bld-el-handle",containment:"#snp-cf-bld",start:function(n,o){o.helper.addClass("hover")},stop:function(n,o){o.helper.removeClass("hover");i(o.helper)},drag:function(n,o){}})}if(!d(this).hasClass("ui-resizable")){var m=false;if(d(this).hasClass("bld-el-img")){m=true}d(this).resizable({handles:"all",autoHide:true,aspectRatio:m,start:function(n,o){o.helper.addClass("hover")},stop:function(n,o){o.helper.removeClass("hover");i(o.helper)},resize:function(n,o){d("#"+o.helper.attr("id")).find(".bld-table-cont").find(".bld-el").css("height",o.helper.height())}});d(this).find(".ui-resizable-handle").show()}});d(".builder-popup").on("mouseleave",".bld-el-cont",function(){});d(".builder-del-step").on({click:function(){if(confirm("Are you sure?")){d(this).parents(".builder-step").remove()}return false}});d(".builder-step-copy").on({click:function(){var m=d(this).parents(".builder-step");return false}});d(".builder-step-settings").on({click:function(){var n=d(this).parents(".builder-step");var m=n.find(".bld-step-editbox");d("#publish").hide();m.dialog({width:500,height:500,dialogClass:"bld-dialog",title:"Step Settings",position:{my:"left top",at:"right top",of:n},close:function(o,p){d(this).dialog("destroy");d("#publish").show();f(d(this).data("id"))},buttons:{Done:function(){d(this).dialog("destroy");d("#publish").show();f(d(this).data("id"))}}});return false}});d(".builder-step-toggle").on({click:function(){var m=d(this).parents(".builder-step");var n=d(this);m.find(".builder-popup").slideToggle(0,function(){if(d(this).is(":visible")){m.removeClass("bld-step-closed").addClass("bld-step-open");n.find("i").removeClass("fa-chevron-up").addClass("fa-chevron-down")}else{m.removeClass("bld-step-open").addClass("bld-step-closed");n.find("i").removeClass("fa-chevron-down").addClass("fa-chevron-up")}});return false}});d(".builder-grid-toggle").on({click:function(){d("#builder-container").toggleClass("bld-enable-grid");return false}});d(".builder-animations-test").on({click:function(){var m=d(this).parents(".builder-step");if(m.find(".builder-popup").attr("data-animation")!=""){m.find(".builder-popup").removeClass(m.find(".builder-popup").attr("data-animation")).animate({nothing:null},1,function(){m.find(".builder-popup").addClass(m.find(".builder-popup").attr("data-animation")).addClass("animated")})}m.find(".bld-el-cont").each(function(){if(d(this).attr("data-animation")!=""){d(this).removeClass(d(this).attr("data-animation")).animate({nothing:null},1,function(){d(this).addClass(d(this).attr("data-animation")).addClass("animated")})}});return false}});d("#builder-container").on("click",".bld-el-del",function(){if(confirm("Are you sure?")){d(this).parents(".bld-el-cont").remove()}return false});function h(o){var s={};var r=o.split(";");r.pop();var m=r.length;for(var n=0;n<m;n++){var t=r[n].indexOf(":");var q=d.trim(r[n].substring(0,t));var p=d.trim(r[n].substring(t+1));if(q!=""&&p!=""){s[q]=p}}return s}function f(n){d("#"+n).find(".builder-popup").css("width",parseInt(d("#editbox-"+n).find(".bld-editbox-width").val()));d("#"+n).find(".builder-popup").css("height",parseInt(d("#editbox-"+n).find(".bld-editbox-height").val()));d("#"+n).find(".builder-step-opts").find(".bld-width").val(parseInt(d("#editbox-"+n).find(".bld-editbox-width").val()));d("#"+n).find(".builder-step-opts").find(".bld-height").val(parseInt(d("#editbox-"+n).find(".bld-editbox-height").val()));if(d("#editbox-"+n).find(".bld-editbox-z-index").val()!=""){d("#"+n).find(".builder-popup").css("z-index",parseInt(d("#editbox-"+n).find(".bld-editbox-z-index").val()))}if(d("#editbox-"+n).find(".bld-editbox-opacity").val()!=""){d("#"+n).find(".builder-popup").css("opacity",d("#editbox-"+n).find(".bld-editbox-opacity").val())}if(d("#editbox-"+n).find(".bld-editbox-border-style").length>0){if(d("#editbox-"+n).find(".bld-editbox-border-style").val()!=""){d("#"+n).find(".builder-popup").css("border-style",d("#editbox-"+n).find(".bld-editbox-border-style").val())}}if(d("#editbox-"+n).find(".bld-editbox-border-width").length>0){if(d("#editbox-"+n).find(".bld-editbox-border-width").val()!=""){d("#"+n).find(".builder-popup").css("border-width",d("#editbox-"+n).find(".bld-editbox-border-width").val())}else{}}if(d("#editbox-"+n).find(".bld-editbox-border-color").length>0){if(d("#editbox-"+n).find(".bld-editbox-border-color").val()!=""){d("#"+n).find(".builder-popup").css("border-color",d("#editbox-"+n).find(".bld-editbox-border-color").val())}else{}}if(d("#editbox-"+n).find(".bld-editbox-border-radius").length>0){if(d("#editbox-"+n).find(".bld-editbox-border-radius").val()){d("#"+n).find(".builder-popup").css("border-radius",d("#editbox-"+n).find(".bld-editbox-border-radius").val()+"px")}else{d("#"+n).find(".builder-popup").css("border-radius","0")}}if(d("#editbox-"+n).find(".bld-editbox-background-image").length>0){if(d("#editbox-"+n).find(".bld-editbox-background-image").val()){d("#"+n).find(".builder-popup").css("background-image","url('"+d("#editbox-"+n).find(".bld-editbox-background-image").val()+"')")}else{d("#"+n).find(".builder-popup").css("background-image","none")}}if(d("#editbox-"+n).find(".bld-editbox-background-color").length>0){if(d("#editbox-"+n).find(".bld-editbox-background-color").val()){d("#"+n).find(".builder-popup").css("background-color",d("#editbox-"+n).find(".bld-editbox-background-color").val())}else{d("#"+n).find(".builder-popup").css("background-color","")}}if(d("#editbox-"+n).find(".bld-editbox-background-repeat").length>0){if(d("#editbox-"+n).find(".bld-editbox-background-repeat").val()!=""){d("#"+n).find(".builder-popup").css("background-repeat",d("#editbox-"+n).find(".bld-editbox-background-repeat").val())}}if(d("#editbox-"+n).find(".bld-editbox-background-position").length>0){if(d("#editbox-"+n).find(".bld-editbox-background-position").val()!=""){d("#"+n).find(".builder-popup").css("background-position",d("#editbox-"+n).find(".bld-editbox-background-position").val())}}if(d("#editbox-"+n).find(".bld-editbox-animation").length>0){var m=d("#editbox-"+n).find(".bld-editbox-animation").find("option:selected").val();if(!m||m==""){d("#"+n).find(".builder-popup").removeClass("animated");d("#"+n).find(".builder-popup").removeClass(d("#"+n).find(".builder-popup").attr("data-animation"))}else{if(d("#"+n).find(".builder-popup").attr("data-animation")!=m){d("#"+n).find(".builder-popup").removeClass(d("#"+n).find(".builder-popup").attr("data-animation"));d("#"+n).find(".builder-popup").attr("data-animation",m);d("#"+n).find(".builder-popup").addClass(m).addClass("animated")}}}if(d("#editbox-"+n).find(".bld-editbox-custom-css").val()!=""){d("#"+n).find(".builder-popup").css(h(d("#editbox-"+n).find(".bld-editbox-custom-css").val()))}}function i(m){d("#editbox-"+m.attr("id")).find(".bld-editbox-width").val(m.outerWidth());d("#editbox-"+m.attr("id")).find(".bld-editbox-height").val(m.outerHeight());d("#editbox-"+m.attr("id")).find(".bld-editbox-top").val(m.position().top);d("#editbox-"+m.attr("id")).find(".bld-editbox-left").val(m.position().left)}function g(m){d("#"+m).find(".bld-el").html("");d("#editbox-"+m).find("input.bld-editbox-pointlis-points").each(function(){d("#"+m).find(".bld-el").append("<li>"+d(this).val()+"</li>")})}function a(n){d("#"+n).css("width",parseInt(d("#editbox-"+n).find("input.bld-editbox-width").val()));d("#"+n).css("height",parseInt(d("#editbox-"+n).find("input.bld-editbox-height").val()));d("#"+n).find(".bld-table-cont").find(".bld-el").css("height",parseInt(d("#editbox-"+n).find("input.bld-editbox-height").val())-2);d("#"+n).css("top",parseInt(d("#editbox-"+n).find("input.bld-editbox-top").val()));d("#"+n).css("left",parseInt(d("#editbox-"+n).find("input.bld-editbox-left").val()));if(d("#editbox-"+n).find("input.bld-editbox-z-index").val()!=""){d("#"+n).css("z-index",parseInt(d("#editbox-"+n).find("input.bld-editbox-z-index").val()))}if(d("#editbox-"+n).find("input.bld-editbox-opacity").val()!=""){d("#"+n).find(".bld-el").css("opacity",d("#editbox-"+n).find(".bld-editbox-opacity").val())}if(d("#editbox-"+n).find("input.bld-editbox-rotate").val()!=""){d("#"+n).find(".bld-el").css("transform","rotate("+d("#editbox-"+n).find(".bld-editbox-rotate").val()+"deg)");d("#"+n).find(".bld-el").css("-webkit-transform","rotate("+d("#editbox-"+n).find(".bld-editbox-rotate").val()+"deg)");d("#"+n).find(".bld-el").css("-moz-transform","rotate("+d("#editbox-"+n).find(".bld-editbox-rotate").val()+"deg)");d("#"+n).find(".bld-el").css("-o-transform","rotate("+d("#editbox-"+n).find(".bld-editbox-rotate").val()+"deg)")}if(d("#editbox-"+n).find(".bld-editbox-font").length>0){d("#"+n).find(".bld-el").css("font-family",d("#editbox-"+n).find(".bld-editbox-font").find("option:selected").val())}if(d("#editbox-"+n).find(".bld-editbox-font-size").length>0){d("#"+n).find(".bld-el").css("font-size",d("#editbox-"+n).find(".bld-editbox-font-size").val()+"px")}if(d("#editbox-"+n).find("input.bld-editbox-color").length>0){d("#"+n).find(".bld-el").css("color",d("#editbox-"+n).find("input.bld-editbox-color").val())}if(d("#editbox-"+n).find("input.bld-editbox-bold").length>0){if(d("#editbox-"+n).find("input.bld-editbox-bold").is(":checked")){d("#"+n).find(".bld-el").css("font-weight","bold")}else{d("#"+n).find(".bld-el").css("font-weight","normal")}}if(d("#editbox-"+n).find("input.bld-editbox-italic").length>0){if(d("#editbox-"+n).find("input.bld-editbox-italic").is(":checked")){d("#"+n).find(".bld-el").css("font-style","italic")}else{d("#"+n).find(".bld-el").css("font-style","normal")}}if(d("#editbox-"+n).find("input.bld-editbox-underline").length>0){if(d("#editbox-"+n).find("input.bld-editbox-underline").is(":checked")){d("#"+n).find(".bld-el").css("text-decoration","underline")}else{d("#"+n).find(".bld-el").css("text-decoration","none")}}if(d("#editbox-"+n).find("input.bld-editbox-img").length>0){d("#"+n).find(".bld-el").attr("src",d("#editbox-"+n).find("input.bld-editbox-img").val())}if(d("#editbox-"+n).find("input.bld-editbox-text").length>0){d("#"+n).find(".bld-el").val(d("#editbox-"+n).find("input.bld-editbox-text").val());d("#"+n).find(".bld-el").html(d("#editbox-"+n).find("input.bld-editbox-text").val())}if(d("#editbox-"+n).find("input.bld-editbox-placeholder").length>0){d("#"+n).find(".bld-el").attr("placeholder",d("#editbox-"+n).find("input.bld-editbox-placeholder").val());d("#"+n).find(".bld-el").find("option").text(d("#editbox-"+n).find("input.bld-editbox-placeholder").val())}if(d("#editbox-"+n).find(".bld-editbox-border-style").length>0){if(d("#editbox-"+n).find(".bld-editbox-border-style").val()!=""){d("#"+n).find(".bld-el").css("border-style",d("#editbox-"+n).find(".bld-editbox-border-style").val());d("#"+n).find(".bld-input-icon").css("border-style",d("#editbox-"+n).find(".bld-editbox-border-style").val())}}if(d("#editbox-"+n).find("input.bld-editbox-border-width").length>0){if(d("#editbox-"+n).find("input.bld-editbox-border-width").val()!=""){d("#"+n).find(".bld-el").css("border-width",d("#editbox-"+n).find("input.bld-editbox-border-width").val());d("#"+n).find(".bld-input-icon").css("border-width",d("#editbox-"+n).find("input.bld-editbox-border-width").val())}else{}}if(d("#editbox-"+n).find("input.bld-editbox-border-color").length>0){if(d("#editbox-"+n).find("input.bld-editbox-border-color").val()!=""){d("#"+n).find(".bld-el").css("border-color",d("#editbox-"+n).find("input.bld-editbox-border-color").val());d("#"+n).find(".bld-input-icon").css("border-color",d("#editbox-"+n).find("input.bld-editbox-border-color").val())}else{}}if(d("#editbox-"+n).find("input.bld-editbox-border-radius").length>0){if(d("#editbox-"+n).find("input.bld-editbox-border-radius").val()){d("#"+n).find(".bld-el").css("border-radius",d("#editbox-"+n).find("input.bld-editbox-border-radius").val()+"px");d("#"+n).find(".bld-input-icon").css("border-radius",d("#editbox-"+n).find("input.bld-editbox-border-radius").val()+"px")}else{d("#"+n).find(".bld-el").css("border-radius","0");d("#"+n).find(".bld-input-icon").css("border-radius","0")}}if(d("#editbox-"+n).find("input.bld-editbox-background-image").length>0){if(d("#editbox-"+n).find("input.bld-editbox-background-image").val()){d("#"+n).find(".bld-el").css("background-image","url('"+d("#editbox-"+n).find("input.bld-editbox-background-image").val()+"')")}else{d("#"+n).find(".bld-el").css("background-image","none")}}if(d("#editbox-"+n).find("input.bld-editbox-background-color").length>0){if(d("#editbox-"+n).find("input.bld-editbox-background-color").val()){d("#"+n).find(".bld-el").css("background-color",d("#editbox-"+n).find("input.bld-editbox-background-color").val())}else{d("#"+n).find(".bld-el").css("background-color","")}}if(d("#editbox-"+n).find(".bld-editbox-background-repeat").length>0){if(d("#editbox-"+n).find(".bld-editbox-background-repeat").val()!=""){d("#"+n).find(".bld-el").css("background-repeat",d("#editbox-"+n).find(".bld-editbox-background-repeat").val())}}if(d("#editbox-"+n).find(".bld-editbox-background-position").length>0){if(d("#editbox-"+n).find(".bld-editbox-background-position").val()!=""){d("#"+n).find(".bld-el").css("background-position",d("#editbox-"+n).find(".bld-editbox-background-position").val())}}if(d("#editbox-"+n).find("input.bld-editbox-padding").length>0){if(d("#editbox-"+n).find("input.bld-editbox-padding").val()!=""){d("#"+n).find(".bld-el").css("padding",d("#editbox-"+n).find("input.bld-editbox-padding").val())}else{d("#"+n).find(".bld-el").css("padding","0")}}if(d("#editbox-"+n).find("input.bld-editbox-lineheight").length>0){if(d("#editbox-"+n).find("input.bld-editbox-lineheight").val()!=""){d("#"+n).find(".bld-el").css("line-height",d("#editbox-"+n).find("input.bld-editbox-lineheight").val()+"px")}else{d("#"+n).find(".bld-el").css("line-height","normal")}}if(d("#editbox-"+n).find("input.bld-editbox-icon").length>0){if(d("#editbox-"+n).find("input.bld-editbox-icon:checked").val()!=""){d("#"+n).find(".bld-input-icon > i").removeClass().addClass("fa fa-"+d("#editbox-"+n).find("input.bld-editbox-icon:checked").val());d("#"+n).find(".bld-input-icon").show();d("#"+n).find(".bld-table").addClass("bld-icon")}else{d("#"+n).find(".bld-input-icon").hide();d("#"+n).find(".bld-table").removeClass("bld-icon")}if(d("#editbox-"+n).find("input.bld-editbox-icon-right-border").is(":checked")){d("#"+n).find(".bld-input-icon").removeClass("bld-input-icon-norborder")}else{d("#"+n).find(".bld-input-icon").addClass("bld-input-icon-norborder")}if(d("#editbox-"+n).find(".bld-editbox-icon-size").length>0){d("#"+n).find(".bld-input-icon").css("font-size",d("#editbox-"+n).find(".bld-editbox-icon-size").val()+"px")}if(d("#editbox-"+n).find(".bld-editbox-icon-field-width").length>0){d("#"+n).find(".bld-input-icon").css("width",d("#editbox-"+n).find(".bld-editbox-icon-field-width").val()+"px")}if(d("#editbox-"+n).find("input.bld-editbox-icon-color").length>0){d("#"+n).find(".bld-input-icon").css("color",d("#editbox-"+n).find("input.bld-editbox-icon-color").val())}if(d("#editbox-"+n).find("input.bld-editbox-icon-bg-color").length>0){d("#"+n).find(".bld-input-icon").css("background-color",d("#editbox-"+n).find("input.bld-editbox-icon-bg-color").val())}}if(d("#editbox-"+n).find(".bld-editbox-animation").length>0){var m=d("#editbox-"+n).find(".bld-editbox-animation").find("option:selected").val();if(!m||m==""){d("#"+n).removeClass("animated");d("#"+n).removeClass(d("#"+n).attr("data-animation"))}else{if(d("#"+n).find(".bld-el").attr("data-animation")!=m){d("#"+n).removeClass(d("#"+n).attr("data-animation"));d("#"+n).attr("data-animation",m);d("#"+n).addClass(m).addClass("animated")}}}if(d("#editbox-"+n).find("input.bld-editbox-animation-delay").length>0){if(d("#editbox-"+n).find("input.bld-editbox-animation-delay").val()!=""){d("#"+n).css("animation-delay",d("#editbox-"+n).find("input.bld-editbox-animation-delay").val()+"ms");d("#"+n).css("-webkit-animation-delay",d("#editbox-"+n).find("input.bld-editbox-animation-delay").val()+"ms")}else{d("#"+n).css("animation-delay","0");d("#"+n).css("-webkit-animation-delay","0")}}if(d("#editbox-"+n).find(".bld-editbox-custom-css").val()!=""){d("#"+n).find(".bld-el").css(h(d("#editbox-"+n).find(".bld-editbox-custom-css").val()))}}function l(m){if(d("#editbox-"+m).find(".bld-editbox-font").length>0){d("#"+m).find(".bld-el").css("font-family",d("#editbox-"+m).find(".bld-editbox-font").find("option:selected").val());if(d("#editbox-"+m).find(".bld-editbox-font").find("option:selected").parent().attr("label")==="Google Fonts"){WebFont.load({google:{families:[d("#editbox-"+m).find(".bld-editbox-font").find("option:selected").val()]}})}}}function c(m){if(d("#editbox-"+m).find("input.bld-editbox-placeholder-color").length>0&&d("#editbox-"+m).find("input.bld-editbox-placeholder-color").val()!=""){d("style[id='bld-ph-"+m+"']").remove();d("<style>").prop("id","bld-ph-"+m).prop("type","text/css").html("#"+m+" .bld-el::-webkit-input-placeholder { color: "+d("#editbox-"+m).find("input.bld-editbox-placeholder-color").val()+"; }#"+m+" .bld-el::-moz-placeholder { color: "+d("#editbox-"+m).find("input.bld-editbox-placeholder-color").val()+"; }").appendTo("head")}}function j(m){if(d("#editbox-"+m).find("input.bld-editbox-pointimg").length>0&&d("#editbox-"+m).find("input.bld-editbox-pointimg").val()!=""){d("style[id='bld-ph-"+m+"']").remove();d("<style>").prop("id","bld-ph-"+m).prop("type","text/css").html("#"+m+" ul.bld-el li { line-height: "+(d("#editbox-"+m).find("input.bld-editbox-lineheight").val()!=""?d("#editbox-"+m).find("input.bld-editbox-lineheight").val()+"px":"normal")+"; padding-left: "+(d("#editbox-"+m).find("input.bld-editbox-pointimg-padding").val()!=""?d("#editbox-"+m).find("input.bld-editbox-pointimg-padding").val():"0")+"px; background-image: url('"+d("#editbox-"+m).find("input.bld-editbox-pointimg").val()+"'); }").appendTo("head")}}d(document).on("keyup",".bld-editbox-live",function(){if(d(this).parents(".bld-el-editbox").hasClass("bld-step-editbox")){f(d(this).parents(".bld-el-editbox").data("id"))}else{a(d(this).parents(".bld-el-editbox").data("id"))}});d(document).on("change",".bld-editbox-live-font",function(){l(d(this).parents(".bld-el-editbox").data("id"))});d(document).on("keyup",".bld-editbox-live-pointlist",function(){j(d(this).parents(".bld-el-editbox").data("id"))});d(document).on("change",".bld-editbox-live-change",function(){if(d(this).parents(".bld-el-editbox").hasClass("bld-step-editbox")){f(d(this).parents(".bld-el-editbox").data("id"))}else{a(d(this).parents(".bld-el-editbox").data("id"))}});d(".builder-tpl-lib-group").mouseenter(function(){d(this).children(".builder-tpl-lib").show()});d(".builder-tpl-lib-group").mouseleave(function(){d(this).children(".builder-tpl-lib").hide()});d(".builder-tpl-lib-cat-label").click(function(){d(".builder-tpl-lib-cat-label").removeClass("active");d(this).addClass("active");d(".builder-tpl-lib-cat-cont").hide();d("#builder-images-category-"+d(this).attr("rel-id")).show();return false});d("#builder-container").on("click",".bld-el-edit",function(){var n=d(this).parents(".bld-el-cont");var m=n.find(".bld-el-editbox");d("#publish").hide();m.dialog({width:500,height:"auto",dialogClass:"bld-dialog",position:{my:"left center",at:"right center",of:n},title:"Element Settings",close:function(o,p){d(this).dialog("destroy");d("#publish").show();a(d(this).data("id"));c(d(this).data("id"))},buttons:{Done:function(){d(this).dialog("destroy");d("#publish").show();a(d(this).data("id"));c(d(this).data("id"))}}});return false});d("#builder-container").on("click",".bld-el-handle-a",function(){return false});d("body").on("click",".bld-editbox-tabs-link",function(){var m=d(this).parents(".bld-el-editbox");m.find(".bld-editbox-tabs-link").removeClass("bld-editbox-tab-link-active");d(this).addClass("bld-editbox-tab-link-active");m.find(".bld-editbox-tab").removeClass("bld-editbox-tab-active");m.find("."+d(this).attr("rel")).addClass("bld-editbox-tab-active");return false});d("body").on("click",".bld-editbox-img-button",function(o){var n=jQuery(this).parent();o.preventDefault();var m=null;m=wp.media.frames.customHeader=wp.media({title:"Choose",library:{type:"image"}});m.on("select",function(){var q=m.state().get("selection").first();var p=new Image();p.onload=function(){if(n.parents(".bld-el-editbox").hasClass("bld-el-editbox-img")){n.parents(".bld-el-editbox").find(".bld-editbox-width").val(this.width);n.parents(".bld-el-editbox").find(".bld-editbox-height").val(this.height)}n.find('input[type="text"]').val(q.attributes.url).trigger("keyup");p=null};p.src=q.attributes.url});m.open();return false});d("body").on("click",".bld-editbox-imglibrary-button",function(s){var n=jQuery(this).parent().children(".bld-editbox-img").first();var p="position: fixed; top: 50%; left: 50%; width: 800px; height: 600px; margin-top: -300px; margin-left: -400px; padding: 20px; background-color: white; z-index: 99999; border: 1px solid gray; border-radius: 2px;";var r='<a href="#" data-src="" data-textField="'+n.attr("name")+'" class="bld-button snp-library-save">Save</a>';var o='<a href="#" class="bld-button snp-library-close" style="background-color: red;">Close</a>';var q='<div class="snp-modal" style="'+p+'"><div class="snp-modal-content" style="background-color: #eee; padding:10px; height:540px; overflow: auto; overflow-y:scroll;"></div><hr /><div style="float:right;">'+r+o+"</div></div>";d("body").append(q);var m=d(".snp-modal .snp-modal-content");d.ajax({url:ajaxurl,dataType:"json",type:"POST",data:{action:"snp_load_library_to_modal"},success:function(t){d.each(t,function(u,v){d.each(v.imgs,function(w,x){m.append('<img class="snp-library-image" style="margin: 1px; border: 3px solid #eee;" src="'+x.img+'" data-name="'+x.name+'" width="100px" height="100px" />')})})}});return false});d("body").on("click",".snp-library-image",function(){d(this).parent().children().css("border","3px solid #eee");d(this).css("border","3px solid blue");d("body .snp-modal .snp-library-save").attr("data-src",d(this).attr("src"))});d("body").on("click",".snp-library-close",function(){d("body .snp-modal").remove();return false});d("body").on("click",".snp-library-save",function(){var m=d("body").find('[name="'+d(this).attr("data-textField")+'"]');var n=d(this).attr("data-src");if(n!=""){m.val(n)}d("body .snp-modal").remove();return false});d(".builder-add-step").click(function(){var n=d("#builder-tpl").find(".builder-step").clone(true);var m=1;if(d("#builder-container").find(".builder-step:last").length>0){m=m+parseInt(d("#builder-container").find(".builder-step:last").attr("data-step"))}n.attr("data-step",m);n.attr("id","step-"+m);n.find(".builder-step-label").text(m);n.find(".bld-step-rand").val(m).attr("disabled",false);n.find("input, select, textarea").each(function(){if(d(this).attr("name")){d(this).attr("name",d(this).attr("name").replace("RAND",m))}});n.find("input, img, div, select, textarea, table, span, a").each(function(){if(d(this).attr("id")){d(this).attr("id",d(this).attr("id").replace("RAND",m))}});n.find("a").each(function(){if(d(this).attr("href").indexOf("RAND")){d(this).attr("href",d(this).attr("href").replace("RAND",m))}});n.find(".bld-step-editbox").attr("data-id","step-"+m).attr("id","editbox-step-"+m);n.find(".bld-run-colorpicker").wpColorPicker(e);d("#builder-container").append(n);n.find(".builder-popup").droppable(b);return false});d(document).on("keyup",".bld-editbox-pointlist-change",function(){g(d(this).parents(".bld-el-editbox").data("id"))});d("body").on("click",".bld-editbox-selectoptions-delete",function(){if(d(this).hasClass("bld-editbox-pointlist-change-btn")){var m=d(this).parents(".bld-el-editbox").data("id")}d(this).parents(".bld-editbox-selectoptions-option").remove();if(m!==undefined){g(m)}return false});d("body").on("click",".bld-editbox-selectoptions-add",function(){var m=d(this).prev(".bld-editbox-selectoptions-option").clone(true);m.find("input").val("");d(this).before(m);if(d(this).hasClass("bld-editbox-pointlist-change-btn")){g(d(this).parents(".bld-el-editbox").data("id"))}return false});d("body").on("click",".bld-editbox-select-link-options-add",function(){var m=0;d(this).parent().find(".bld-editbox-select-link-options-option").each(function(){m++});console.log((m-1)+". "+m);var n=d(this).prev(".bld-editbox-select-link-options-option").clone(true);n.find("input").each(function(o){this.name=this.name.replace("["+(m-1)+"]","["+(m)+"]");this.value=""});d(this).before(n);return false});d("body").on("click",".bld-editbox-select-link-options-delete",function(){d(this).parents(".bld-editbox-select-link-options-option").remove();return false});d("body").on("change",".bld-editbox-name",function(){var m=d(this).val();d(this).val(m.replace(/ /g,""))});tinymce.init(k);d("#builder-container").find(".bld-run-colorpicker").wpColorPicker(e)});